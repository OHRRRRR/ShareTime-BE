<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ureca.study.model.dao.StudyDAO">

    <select id="studyExists" resultType="boolean" parameterType="string">
        SELECT COUNT(*) > 0 FROM Study WHERE study_name = #{study_name}
    </select>

    <insert id="createStudy" parameterType="Study" useGeneratedKeys="true" keyProperty="study_id">
        INSERT INTO Study (study_name, study_key)
        VALUES (#{study_name}, #{study_key})
    </insert>

    <select id="validateStudyKey" resultType="boolean" parameterType="map">
        SELECT COUNT(*) > 0 FROM Study WHERE study_name = #{study_name} AND study_key = #{study_key}
    </select>
</mapper>